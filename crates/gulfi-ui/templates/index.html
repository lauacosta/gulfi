<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,100..700;1,100..700&display=swap" rel="stylesheet">
  <link rel="preload" href="/_assets/styles.css" as="style" onload="this.rel='stylesheet'">
  <script src="https://unpkg.com/htmx.org@2.0.4"></script>
  <title>Querysense</title>
    <link rel="icon" type="image/x-icon" href="../assets/magnifyingglass_102622.ico">
</head>
    <body>
        <aside class="sidebar">
            <h2>Historial</h2>
            <ul class="historial" id="historial"></ul>
        </aside>
        <main class="main-content">
            <div class="form-container">
                <form hx-get="/search" hx-target="#table-content" class="search-form" id="search-form">
                    <div class="search-group">
                        <label for="search">Búsqueda:
                            <span class="help-icon">
                                &#9432;
                                <span class="search-tooltip">El formato es "query | provincia, ciudad", los campos provincia y ciudad son opcionales.</span>
                            </span>
                        </label>
                        <input type="text" class="search-input" id="search-input" placeholder="Ingresa tu busqueda..." name="query" required>
                    </div>
                    <div class="search-group">
                    <label for="strategy">Método de Búsqueda:</label>
                        <select id="strategy" name="strategy" class="search-type">
                            <option value="Fts" selected>Full Text Search</option>
                            <option value="Semantic">Semántica</option>
                            <option value="ReciprocalRankFusion">Reciprocal Rank Fusion</option>
                            <option value="KeywordFirst">Keyword First</option>
                            <option value="ReRankBySemantics">Re-Ranking by Semantics</option>
                        </select>
                    </div>

                    <div class="search-group">
                        <label>Sexo:</label>
                        <div class="radio-group">
                            <label>
                                <input type="radio" name="sexo" value="U" checked> Todos
                            </label>
                            <label>
                                <input type="radio" name="sexo" value="M"> Masculino
                            </label>
                            <label>
                                <input type="radio" name="sexo" value="F"> Femenino
                            </label>
                        </div>
                    </div>
                    <div class="search-group">
                        <label>Rango de Edad:</label>
                        <div class="age-range">
                            <input type="number" id="age_min" name="edad_min" min="0" max="100" value="0" placeholder="Mínimo">
                            <input type="number" id="age_max" name="edad_max" min="0" max="100" value="100" placeholder="Máximo">
                        </div>
                    </div>

                    <div class="search-group ocultable">
                        <label for="k">N° de Vecinos:
                            <span class="help-icon">
                                &#9432;
                                <span class="search-tooltip">Representa el número de resultados más cercanos que se quiere buscar.</span>
                            </span>
                        </label>
                        <div class="age-range">
                            <input type="number" id="vecinos" name="k" min="1" max="10000" value="1000">
                        </div>
                    </div>

                    <div class="search-group balance-slider">
                        <label for="balanceSlider">Pesos:
                            <span class="help-icon">
                                &#9432;
                                <span class="search-tooltip">Representa el compromiso de asignarle más importancia a los resultados de cada búsqueda.</span>
                            </span>
                        </label>
                        <input type="range" id="balanceSlider" min="0" max="100" value="50">
                        <p>Peso FTS: <span id="value1Display" class="slider-value">50</span></p>
                        <p>Peso Semantic: <span id="value2Display" class="slider-value">50</span></p>
                    </div>

                    <div class="search-group">
                        <input type="hidden" id="hiddenValue1" name="peso_fts" value="50">
                        <input type="hidden" id="hiddenValue2" name="peso_semantic" value="50">
                    </div>

                    <div class="button-container">
                        <button type="submit" class="search-button">Buscar</button>
                        <button id="downloadBtn" class="search-button" disabled>
                            Descargar <span id="itemsCount">0</span> elementos (<span id="dataWeight">0 KB</span>)
                        </button>
                    </div>
                </form>
                <div class="tooltip">
                    Presiona Ctrl + b para empezar a buscar. Presiona Ctrl + Shift + s para descargar.
                </div>
            </div>

            <div class="table-container" id=>
                
                <div class="tooltip">
                    Haz click en las columnas que quieras exportar a CSV, se acumularan hasta que presiones descargar!
                </div>
                <div id="table-content">
                    <p>Realiza una busqueda!</p>
                </div>
            </div>
        </main>
        <script src="/_assets/main.js"></script>
    </body>
</html>
